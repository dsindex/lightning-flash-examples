# lightning-flash-examples

reference code for lightning-flash

# text-classification

### how to

- installation
```
# torch >= 1.9.0
$ pip install 'lightning-flash[text,serve]'
```

- data preparation
```
# get train.txt, valid.txt from https://github.com/dsindex/iclassifier/tree/master/data/clova_sentiments
$ cd data
$ python convert-to-csv.py --input_path train.txt > train.csv
$ python convert-to-csv.py --input_path valid.txt > valid.csv
```

- train
```
$ python text-classification.py
```

- inference
```
# command line cli
$ flash text_classification
Segmentation fault (core dumped)

```

- server
```
$ python server.py
Segmentation fault (core dumped)

# it seems we need to wait!
...
Core was generated by `python server.py'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00007fee4590b891 in google::protobuf::internal::ReflectionOps::FindInitializationErrors(google::protobuf::Message const&, std::string const&, std::vector<std::string, std::allocator<std::string> >*) ()
   from /opt/conda/lib/python3.7/site-packages/google/protobuf/pyext/_message.cpython-37m-x86_64-linux-gnu.so

$ python request.py

```

# references

- https://github.com/PyTorchLightning/lightning-flash
- https://lightning-flash.readthedocs.io/en/latest/api/generated/flash.text.classification.model.TextClassifier.html#flash.text.classification.model.TextClassifier
- https://lightning-flash.readthedocs.io/en/latest/reference/text_classification.html#text-classification
- https://github.com/PyTorchLightning/lightning-flash/blob/master/flash/core/serve/server.py
